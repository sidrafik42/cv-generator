<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <!-- Primary Meta Tags -->
    <title>CV Generated Successfully - Download Your Professional Resume | CV Generator</title>
    <meta name="title" content="CV Generated Successfully - Download Your Professional Resume" />
    <meta name="description" content="Your professional CV has been successfully generated. Download your resume in PDF and Word formats instantly." />
    <meta name="robots" content="noindex, follow" />
    <link rel="canonical" href="{{ request.url }}" />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="{{ request.url }}" />
    <meta property="og:title" content="CV Generated Successfully - Download Your Professional Resume" />
    <meta property="og:description" content="Your professional CV has been successfully generated. Download your resume in PDF and Word formats." />
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="CV Generated Successfully - Download Your Professional Resume" />
    <meta name="twitter:description" content="Your professional CV has been successfully generated. Download your resume in PDF and Word formats." />
    
    <!-- Stylesheets -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
  </head>
  <body>
    <div class="container">
      <header>
        <h1><i class="fas fa-check-circle"></i> Success!</h1>
        <p>Your professional CV has been created</p>
      </header>

      <div class="success-content">
        <div class="success-message">
          <h2>CV Generated Successfully</h2>
          <p>
            Thank you for using our CV Generator. Your professional CV has been
            successfully created in both PDF and Word formats.
          </p>
        </div>

        {% if not offer_completed %}
        <!-- CPA Offer Section -->
        <div class="offer-section" style="background: #fff3cd; border: 2px solid #ffc107; border-radius: 8px; padding: 2rem; margin: 2rem 0; text-align: center;">
          <h3 style="color: #856404; margin-bottom: 1rem;">
            <i class="fas fa-gift"></i> Complete a Quick Offer to Unlock Your CV
          </h3>
          <p style="color: #856404; margin-bottom: 1.5rem; font-size: 1.1rem;">
            To download your professional CV, please complete a quick offer below. 
            This helps us keep our service free for everyone.
          </p>
          
          <div style="margin: 2rem 0;">
            <iframe 
              id="cpaFrame" 
              src="{{ cpa_link }}" 
              style="width: 100%; min-height: 600px; border: 1px solid #ddd; border-radius: 4px;"
              frameborder="0"
              scrolling="yes">
            </iframe>
          </div>
          
          <div style="background: #fff; padding: 1.5rem; border-radius: 6px; margin-top: 1.5rem;">
            <p style="color: #333; margin-bottom: 1rem; font-weight: 600;">
              After completing the offer above, click the button below to unlock your downloads:
            </p>
            <form action="/complete_offer" method="POST" style="display: inline-block;">
              <button type="submit" class="btn-primary" style="padding: 1rem 2rem; font-size: 1.1rem; cursor: pointer;">
                <i class="fas fa-unlock"></i> I've Completed the Offer - Unlock Downloads
              </button>
            </form>
          </div>
          
          <p style="color: #856404; margin-top: 1rem; font-size: 0.9rem;">
            <i class="fas fa-info-circle"></i> Having trouble? Make sure you fully complete the offer before clicking unlock.
          </p>
        </div>
        {% else %}
        <!-- Download Section (shown after offer completion) -->
        <div class="download-section" style="background: #d4edda; border: 2px solid #28a745; border-radius: 8px; padding: 2rem; margin: 2rem 0;">
          <h3 style="color: #155724; margin-bottom: 1rem;">
            <i class="fas fa-check-circle"></i> Offer Completed! Download Your CV
          </h3>
          <p style="color: #155724; margin-bottom: 1.5rem;">
            Thank you for completing the offer! Your professional CV is ready to download.
          </p>
          <div class="download-buttons" style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
            {% if docx_file %}
            <a href="/download/{{ docx_file }}" class="btn-download" style="background: #007bff; color: white; padding: 1rem 2rem; border-radius: 6px; text-decoration: none; display: inline-flex; align-items: center; gap: 0.5rem; font-weight: 600; transition: background 0.3s;">
              <i class="fas fa-file-word"></i> Download Word Document
            </a>
            {% endif %} 
            {% if pdf_file %}
            <a href="/download/{{ pdf_file }}" class="btn-download" style="background: #dc3545; color: white; padding: 1rem 2rem; border-radius: 6px; text-decoration: none; display: inline-flex; align-items: center; gap: 0.5rem; font-weight: 600; transition: background 0.3s;">
              <i class="fas fa-file-pdf"></i> Download PDF Document
            </a>
            {% endif %}
          </div>
        </div>
        {% endif %}

        <div class="actions" style="text-align: center; margin-top: 2rem;">
          <a href="/" class="btn-secondary" style="display: inline-block; padding: 0.75rem 1.5rem; background: #6c757d; color: white; text-decoration: none; border-radius: 6px;">
            <i class="fas fa-plus"></i> Create Another CV
          </a>
        </div>
      </div>
    </div>
  </body>
</html>
